language: java
branches:
  only:
  - master
  - develop
before_install:
- chmod +x gradlew
install: true
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
script:
- git clone -b master https://github.com/nablarch/nablarch-ci-script.git $HOME/build-script/
  && chmod +x $HOME/build-script/travis-ci/*.sh
- $HOME/build-script/travis-ci/install-oracle-jdk6.sh
- $HOME/build-script/travis-ci/nablarch-build.sh
- $HOME/build-script/travis-ci/upload-test-report.sh
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
notifications:
  slack:
    secure: M0yX08R8qeX0EmqCCOmoFE/p/AB92lTt1yjOpTRVcNf99F68iBLIAGvv3lJMflDdXDJ1gqmfm6sJjgrpsqM0Yd1EvADxeD+8dILWfh3dBBj+VdVfAh8xEC7SaHbStWd5LU19BqB+UQ2qI6SbhuVDJkJnX7aKcLLrj/SB/80CdZb158uk3iuCbMNiT8zhAyucUKJDfhYna5E13A9pSEHi7qvcGjeuoE00hg+YSuGpoBF6d2Ef1ycAgpF9ZByEZkTu8b16XH3+VkaQogi70lDAHQn42UUdiT/zvC9HpopPyMdpeNQe7ivBCtXQOGDPkf+L1x/X3eQt9tqen8xgcZ4KKQNHfQIcBFkkAqbHqIeBuiz7oKr9VZ4GCp5GkXi9q7lpRbNvJbdcQFluw9Nz0GdD40kUhGc9rjtZT+X6Dx5hL5J+wJFsvtYTQuk386C60sNeD3y1PPsTM6Q/khXb2nHa0FxDAXVbQ/eeOFx8gh4KbiIdL8aJptG1S1gboj+TwRy+MCxJLnQ3aywwJZLrQiT/zq2ckjd2pbOcEej1cucElDaXU1kVPEYwcy5HOPPNx9ysDqBJE7zTjqrS5OQcZCu9tv7JxIYozfM8gEj23W7oaPgbDZdOg0WZuZLXqQ3iQvC3hHcGC38/yOIpYUjtlsAD3JFbgN8a5SX1u1tkM1Mnc9k=
